<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Plankton's Lab â€” Element Guesser</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body {
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background:#07131a;
    color:#bfffe0;
    display:flex;
    height:100vh;
    align-items:stretch;
    padding:18px;
    box-sizing:border-box;
  }
  .ptable-side {
    flex:1;
    background:#07121a;
    border-radius:10px;
    padding:14px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
    box-shadow: inset 0 0 40px rgba(0,255,170,0.03);
  }
  .ptable-side h2{margin:0;color:#7fffd4}
  .ptable-side img {
    width:100%;
    max-width:520px;
    border-radius:8px;
    border:2px solid rgba(0,255,170,0.08);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
  }

  .control {
    flex:1.25;
    margin-left:18px;
    background:linear-gradient(180deg,#0e1720,#071016);
    border-radius:12px;
    padding:18px;
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:16px;
  }

  #karen {
    width:220px;
    border-radius:8px;
    border:2px solid rgba(0,255,170,0.08);
  }

  #question {
    font-size:1.2rem;
    text-align:center;
    padding:10px 12px;
    min-height:56px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#d9fff0;
  }

  .controls-row { display:flex; gap:12px; align-items:center; }
  .btn {
    background:#00ffd6;
    color:#01201e;
    border:none;
    padding:10px 18px;
    border-radius:10px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,0.4);
  }
  .btn:hover { transform: translateY(-2px); }
  #result { font-size:1.15rem; margin-top:6px; min-height:28px; text-align:center; color:#e6ffe9; }

  #plankton {
    width:160px;
    margin-top:6px;
    border-radius:8px;
  }

  .hidden { display:none !important; }

  #playAgain {
    margin-top:8px;
    display:none;
    background:#0ec97d;
    color:#02261b;
    border:none;
    padding:8px 14px;
    border-radius:8px;
    font-weight:700;
    cursor:pointer;
  }

  @media (max-width:900px){
    body{flex-direction:column}
    .ptable-side{order:2;width:100%}
    .control{order:1;margin-left:0;width:100%}
  }

  /* Fullscreen video */
  #planktonVideo {
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:1000;
    background:black;
    display:none;
  }
</style>
</head>
<body>

<div class="ptable-side">
  <h2>Periodic Table</h2>
  <img id="ptableImg" src="Screenshot 2025-09-24 8.08.38 AM.png" alt="Periodic table">
</div>

<div class="control">
  <img id="karen" src="KarenTalking.gif" alt="Karen talking">
  <div id="question">Preparing...</div>

  <div class="controls-row">
    <button class="btn" id="yesBtn">Yes</button>
    <button class="btn" id="noBtn">No</button>
  </div>

  <div id="result"></div>

  <img id="plankton" src="PlanktonWatching.png" alt="Plankton watching">

  <button id="confirmGuess" class="hidden btn">Yes, this is correct!</button>
  <button id="denyGuess" class="hidden btn">No, that's wrong!</button>

  <button id="playAgain">Play Again</button>
</div>

<video id="planktonVideo" controls></video>

<script>
// Elements data
const ELEMENTS = [
  { symbol: "Ra", group: 2, period: 7, block: "s", family: "alkaline" },
  { symbol: "Na", group: 1, period: 3, block: "s", family: "alkali" },
  { symbol: "Cu", group: 11, period: 4, block: "d", family: "transition" },
  { symbol: "N",  group: 15, period: 2, block: "p", family: "nonmetal" },
  { symbol: "Al", group: 13, period: 3, block: "p", family: "post-transition" },
  { symbol: "Fm", group: null, period: 7, block: "f", family: "actinide" },
  { symbol: "Ca", group: 2, period: 4, block: "s", family: "alkaline" },
  { symbol: "Br", group: 17, period: 4, block: "p", family: "halogen" },
  { symbol: "H",  group: 1, period: 1, block: "s", family: "nonmetal" },
  { symbol: "Xe", group: 18, period: 5, block: "p", family: "noble" },
  { symbol: "Tl", group: 13, period: 6, block: "p", family: "post-transition" },
  { symbol: "Hs", group: 8, period: 7, block: "d", family: "transition" },
  { symbol: "Pu", group: null, period: 7, block: "f", family: "actinide" },
  { symbol: "Hf", group: 4, period: 6, block: "d", family: "transition" },
  { symbol: "Te", group: 16, period: 5, block: "p", family: "metalloid" },
  { symbol: "Kr", group: 18, period: 4, block: "p", family: "noble" },
  { symbol: "Fr", group: 1, period: 7, block: "s", family: "alkali" },
  { symbol: "Zr", group: 4, period: 5, block: "d", family: "transition" },
  { symbol: "Mo", group: 6, period: 5, block: "d", family: "transition" },
  { symbol: "Ce", group: null, period: 6, block: "f", family: "lanthanide" }
];

// Question logic
const QUESTIONS = [
  { text: "Is it an alkali metal (Group 1)?", test: e => e.family==="alkali" },
  { text: "Is it a transition metal (d-block)?", test: e => e.family==="transition" },
  { text: "Is it a halogen (Group 17)?", test: e => e.family==="halogen" },
  { text: "Is it a noble gas (Group 18)?", test: e => e.family==="noble" },
  { text: "Is it a lanthanide (f-block, Period 6)?", test: e => e.family==="lanthanide" },
  { text: "Is it an actinide (f-block, Period 7)?", test: e => e.family==="actinide" },
  { text: "Is it in Period 2?", test: e => e.period===2 },
  { text: "Is it in Period 3?", test: e => e.period===3 },
  { text: "Is it in Period 4?", test: e => e.period===4 },
  { text: "Is it in Period 5?", test: e => e.period===5 },
  { text: "Is it in Period 6?", test: e => e.period===6 },
  { text: "Is it in Period 7?", test: e => e.period===7 }
];

let candidates = [];
let currentQuestion = null;
let finalGuess = null;

// Elements
const questionEl = document.getElementById('question');
const resultEl = document.getElementById('result');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const planktonStatic = document.getElementById('plankton');
const confirmGuessBtn = document.getElementById('confirmGuess');
const denyGuessBtn = document.getElementById('denyGuess');
const playAgainBtn = document.getElementById('playAgain');
const planktonVideo = document.getElementById('planktonVideo');

// Utilities
function setQuestion(text){ questionEl.textContent=text; }

// Pick next question that splits pool best
function nextQuestion(){
  if(candidates.length <= 1) return makeFinalGuess();
  let bestSplit = null;
  let bestQ = null;
  QUESTIONS.forEach(q=>{
    const yesCount = candidates.filter(q.test).length;
    const noCount = candidates.length - yesCount;
    if(yesCount>0 && noCount>0){
      const balance = Math.min(yesCount,noCount);
      if(!bestSplit || balance>bestSplit){ bestSplit=balance; bestQ=q; }
    }
  });
  if(bestQ){
    currentQuestion = bestQ;
    setQuestion("Karen: "+bestQ.text);
  } else {
    makeFinalGuess();
  }
}

// Handle yes/no answer
function answer(yes){
  if(!currentQuestion) return;
  candidates = candidates.filter(el=> yes? currentQuestion.test(el):!currentQuestion.test(el));
  currentQuestion = null;
  nextQuestion();
}

// Show guess confirmation
function makeFinalGuess(){
  if(candidates.length===0){
    failSequence();
    return;
  }
  finalGuess = candidates[0];
  setQuestion("Plankton: I think it's "+finalGuess.symbol+"!");
  resultEl.textContent="Is this correct?";
  planktonStatic.classList.add('hidden');
  confirmGuessBtn.classList.remove('hidden');
  denyGuessBtn.classList.remove('hidden');
}

// Player confirms guess
function confirmGuess(){
  confirmGuessBtn.classList.add('hidden');
  denyGuessBtn.classList.add('hidden');
  resultEl.textContent="Plankton guessed correctly!";
  showVideo("planktonyes.mp4");
}

// Player denies guess
function denyGuess(){
  confirmGuessBtn.classList.add('hidden');
  denyGuessBtn.classList.add('hidden');
  resultEl.textContent="Plankton guessed wrong!";
  showVideo("PlanktonScream.mp4");
}

// Play full screen video
function showVideo(src){
  planktonVideo.src = src;
  planktonVideo.style.display = "block";
  planktonVideo.play();
  planktonVideo.onended = ()=>{
    planktonVideo.style.display="none";
    playAgainBtn.style.display="inline-block";
  };
}

// Fail sequence (no candidates)
function failSequence(){
  setQuestion("Plankton: Curses! I can't be certain.");
  resultEl.textContent="Plankton failed to guess.";
  planktonStatic.classList.add('hidden');
  showVideo("PlanktonScream.mp4");
}

// Start game
function startGame(){
  candidates = ELEMENTS.slice();
  finalGuess = null;
  currentQuestion = null;
  setQuestion("Preparing...");
  resultEl.textContent="";
  planktonStatic.classList.remove('hidden');
  confirmGuessBtn.classList.add('hidden');
  denyGuessBtn.classList.add('hidden');
  playAgainBtn.style.display="none";
  setTimeout(nextQuestion, 300);
}

// Bind buttons
yesBtn.addEventListener('click',()=>answer(true));
noBtn.addEventListener('click',()=>answer(false));
confirmGuessBtn.addEventListener('click',confirmGuess);
denyGuessBtn.addEventListener('click',denyGuess);
playAgainBtn.addEventListener('click',startGame);

window.addEventListener('load',startGame);
</script>
</body>
</html>

